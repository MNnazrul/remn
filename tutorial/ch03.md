

## ЁЯжА **Getting to Know Idiomatic Code (Idiomatic ржХрзЛржб ржкрж░рж┐ржЪрж┐рждрж┐)**

ржирждрзБржи ржнрж╛рж╖рж╛ ржпрзЗржоржи Rust рж╢рж┐ржЦрждрзЗ ржЧрж┐ржпрж╝рзЗ ржЖржкржирж┐ рж╣рзЯрждрзЛ тАЬidiomatic codeтАЭ ржПрж░ ржХржерж╛ рж╢рзБржирзЗржЫрзЗржиред

* ржПржЯрж┐ рж╢рзБржзрзБ ржХрзЛржб ржХрж╛ржЬ ржХрж░ржмрзЗ ржХрж┐ржирж╛ рждрж╛ ржирж┐рзЯрзЗ ржирзЯред
* ржПржЯрж┐ рж╣рж▓рзЛ ржХрзЛржбржХрзЗ рж╕рзЗржЗ ржнрж╛рж╖рж╛рж░ **ржкрзНрж░ржЪрж▓рж┐ржд ржзрж╛рж░рж╛ ржУ ржирж┐рзЯржорзЗ ржлрж┐ржЯ ржХрж░рж╛**ред

### тЭУ ржХрзЗржи ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг?

ржПржХржЯрж┐ ржЙржжрж╛рж╣рж░ржг ржжрж┐ржпрж╝рзЗ ржмрзЛржЭрж╛ ржпрж╛ржХ:

* ржзрж░рж╛ ржпрж╛ржХ ржЖржорж┐ ржмрж▓рж▓рж╛ржо, ржПржЗ ржЯрж┐ржЙржЯрзЛрж░рж┐ржпрж╝рж╛рж▓ ржЕржирзБрж╕рж░ржг ржХрж░рзЗ ржЖржкржирж┐ **тАЬржПржХржЗ рж╕ржЩрзНржЧрзЗ ржжрзБржЯрж┐ ржХрж╛ржЬ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржитАЭ**тАФRust рж╢рж┐ржЦрждрзЗ ржПржмржВ ржирж┐ржЬрзЗрж░ editor ржмрж╛ржирж╛рждрзЗред
* ржмрж┐ржнрж┐ржирзНржи ржнрж╛рж╖рж╛ржпрж╝ ржПрж░ ржЬржирзНржп ржнрж┐ржирзНржи expression ржЖржЫрзЗ:

  * ржЬрж╛рж░рзНржорж╛ржи: ржПржХржЗ ржзрж░ржирзЗрж░ saying ржЖржЫрзЗ
  * ржкрж░рзНрждрзБржЧрж┐ржЬ: тАЬkilling two rabbits with one stick blowтАЭ
  * ржЗржВрж░рзЗржЬрж┐: **тАЬTo kill two birds with one stoneтАЭ**

> ржорзВрж▓ ржХржерж╛: рж╕рж╣ржЬрзЗ ржмрзЛржЭрж╛рж░ expression ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╕ржм рж╕ржоржпрж╝ ржнрж╛рж▓ред

ржПржнрж╛ржмрзЗржЗ idiomatic ржХрзЛржб:

* ржкрзНрж░ржЪрж▓рж┐ржд ржирж┐рзЯржо ржУ practice ржЕржирзБрж╕рж░ржг ржХрж░рж╛
* ржХрзЛржб **ржкржаржиржпрзЛржЧрзНржп ржУ ржмрзЛржЭрж╛рж░ рж╕рж╣ржЬ** ржХрж░рж╛

### ЁЯзСтАНЁЯТ╗ ржХрзЛржб ржкржбрж╝рж╛рж░ ржкрзНрж░рзЗржХрзНрж╖рж╛ржкржЯ

* ржорж╛ржирзБрж╖ рж╕рж╛ржзрж╛рж░ржгржд ржЖржкржирж╛рж░ ржХрзЛржб ржкржбрж╝рзЗ рждржЦржиржЗ ржпржЦржи:

  1. Bug ржЖржЫрзЗ
  2. ржирждрзБржи ржХрж┐ржЫрзБ add ржХрж░рждрзЗ рж╣ржмрзЗ

* рждрж╛ржЗ ржХрзЛржб ржмрзБржЭрждрзЗ рж╕рж╣ржЬ ржХрж░рж╛:

  * ржмрж░рзНрждржорж╛ржи collaborators-ржПрж░ ржЬржирзНржп рж╕рзБржмрж┐ржзрж╛
  * ржнржмрж┐рж╖рзНржпрждрзЗ ржирж┐ржЬрзЗрж░ ржЬржирзНржп рж╕рзБржмрж┐ржзрж╛ (debug ржмрж╛ ржирждрзБржи feature add ржХрж░рждрзЗ ржЧрзЗрж▓рзЗ)

---

### ЁЯЫая╕П How weтАЩll do it

ржЖржорж░рж╛ рждрж┐ржи ржзрж╛ржкрзЗ idiomatic code ржЕржирзБрж╢рзАрж▓ржи ржХрж░ржм:

1. **Refining our code** тЖТ ржХрзЛржбрзЗрж░ style ржЕржирзБржпрж╛ржпрж╝рзА рж╕рж╛ржЬрж╛ржирзЛ
2. **Using crossterm properly** тЖТ library ржпржерж╛ржпржержнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛
3. **Guidance from a familiar reference** тЖТ 90s-ржПрж░ ржкрж░рж┐ржЪрж┐ржд paper clip-ржПрж░ ржоржд ржирж┐рж░рзНржжрзЗрж╢рж┐ржХрж╛ ржЕржирзБржпрж╛ржпрж╝рзА ржХрж╛ржЬ ржХрж░рж╛

---

### ЁЯФД Refactoring

* ржХрзЛржбрзЗрж░ ржХрж╛рж░рзНржпржХрж╛рж░рж┐рждрж╛ ржкрж░рж┐ржмрж░рзНрждржи ржирж╛ ржХрж░рзЗ **structure ржПржмржВ readability ржЙржирзНржиржд ржХрж░рж╛** рж╣рж▓рзЛ refactoringред
* рж▓ржХрзНрж╖рзНржп: **ржкрж░рж┐ржкрзВрж░рзНржгрждрж╛ ржиржпрж╝, ржзрж╛рж░рж╛ржмрж╛рж╣рж┐ржХ ржЙржирзНржирждрж┐**
* ржкрзНрж░ржержорзЗ **manual testing** ржХрж░ржм ржпрзЗржи ржХрзЛржирзЛ ржХрж┐ржЫрзБ break ржирж╛ рж╣ржпрж╝
* Automated tests ржнрж╛рж▓рзЛ, рждржмрзЗ ржПржЗ ржЯрж┐ржЙржЯрзЛрж░рж┐ржпрж╝рж╛рж▓рзЗрж░ scope-ржПрж░ ржмрж╛ржЗрж░рзЗ

---

## ЁЯжА **Splitting the Code into Multiple Files (ржХрзЛржбржХрзЗ ржПржХрж╛ржзрж┐ржХ ржлрж╛ржЗрж▓рзЗ ржнрж╛ржЧ ржХрж░рж╛)**

Rust-ржП, ржЕржирзЗржХ programming language-ржПрж░ ржорждрзЛржЗ, рж╕рж╛ржзрж╛рж░ржгржд `main()` method рж╢рзБржзрзБ **app-ржПрж░ entry point** рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ ржПржмржВ ржмрзЗрж╢рж┐ ржХрж┐ржЫрзБ ржХрж░рзЗ ржирж╛ред

ржЖржорж╛ржжрзЗрж░ рж▓ржХрзНрж╖рзНржп рж╣рж▓рзЛ ржХрзЛржбржХрзЗ **рж▓ржЬрж┐ржХрзНржпрж╛рж▓ржнрж╛ржмрзЗ ржарж┐ржХ ржЬрж╛рзЯржЧрж╛ржпрж╝ рж░рж╛ржЦрж╛**, ржпрж╛рждрзЗ ржкрж░рзЗ рж╕рж╣ржЬрзЗ ржЦрзБржБржЬрзЗ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ ржПржмржВ maintain ржХрж░рж╛ ржпрж╛ржпрж╝ред ржПржЗ approach-ржПрж░ ржЖрж░ржУ ржЕржирзЗржХ рж╕рзБржмрж┐ржзрж╛ ржЖржЫрзЗ, ржпрж╛ ржЖржорж░рж╛ ржзрзАрж░рзЗ ржзрзАрж░рзЗ ржжрзЗржЦржмред

---

### ЁЯФ╣ ржХрзЗржи ржПржЦржи ржХрзЛржб ржЬржЯрж┐рж▓?

* ржЖржорж╛ржжрзЗрж░ ржХрзЛржб ржПржЦржи ржПржХржЯрзБ ржХржарж┐ржи ржоржирзЗ рж╣ржЪрзНржЫрзЗред
* ржХрзЛржбржЯрж╛ ржмрзБржЭрждрзЗ рж╣рж▓рзЗ ржкрзБрж░рзЛржЯрж╛ ржкрзЬрзЗ ржпрзЗрждрзЗ рж╣рзЯред
* рж╕ржВржХрзНрж╖рзЗржкрзЗ: ржПржЯрж┐ ржкрзНрж░рждрж┐ржЯрж┐ key press echo ржХрж░рзЗ ржПржмржВ `'q'` ржЪрж╛ржкрж▓рзЗ exit ржХрж░рзЗред

ржЖржорж░рж╛ ржПржЯрж┐ **рж╕рж╣ржЬ ржХрж░ржм**:

* Editor-ржПрж░ ржЬржирзНржп ржПржХржЯрж┐ ржирждрзБржи **struct** рждрзИрж░рж┐ ржХрж░ржм, ржирж╛ржо рж╣ржмрзЗ `Editor`
* ржПржЯрж┐ ржЖрж▓рж╛ржжрж╛ ржлрж╛ржЗрж▓рзЗ ржерж╛ржХржмрзЗ тЖТ ржХрзЛржб ржЖрж░рзЛ ржкрж░рж┐рж╖рзНржХрж╛рж░ ржУ idiomatic рж╣ржмрзЗ

---

### ЁЯФ╣ Struct ржХрзА?

* Struct рж╣рж▓рзЛ **ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ ржПржмржВ ржХржЦржирзЛ ржХржЦржирзЛ function-ржПрж░ ржПржХржЯрж┐ group**, ржпрж╛ ржПржХрж╕рж╛ржерзЗ ржПржХржЯрж┐ ржЕрж░рзНржержкрзВрж░рзНржг unit рждрзИрж░рж┐ ржХрж░рзЗред
* ржЖржорж╛ржжрзЗрж░ ржХрзЛржб neat ржУ organized рж░рж╛ржЦрж╛рж░ ржЬржирзНржп ржПржЯрж┐ ржкрзНрж░ржпрж╝рзЛржЬржиред

ржПржЦржи ржЖржорж░рж╛ `main.rs`-ржП ржмрзЗрж╢рж┐ ржХрж┐ржЫрзБ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░ржм ржирж╛ ржПржмржВ focus ржХрж░ржм `editor.rs`-ржПред

---

### ЁЯФ╣ Crossterm-ржПрж░ ржмрзНржпржмрж╣рж╛рж░

* ржПржЦржи ржкрж░рзНржпржирзНржд ржЖржорж░рж╛ Crossterm рж╢рзБржзрзБ **Raw Mode** entry/exit ржПрж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржЫрж┐ред
* ржПржЦржи ржПржЯрж┐ terminal ржерзЗржХрзЗ **ржарж┐ржХржнрж╛ржмрзЗ input ржкржбрж╝рж╛рж░ ржЬржирзНржп** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржмрзЗред

ржПржЦрж╛ржирзЗ match ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржзрж░ржиржЯрж┐ ржжрзЗржЦрждрзЗ рж╣ржмрзЗред

---

### ЁЯФ╣ Inner Match ржЙржжрж╛рж╣рж░ржг

```rust
match (event.code) {
    Char(c) => {
        if c == 'q' {
            break;
        }
    },
    _ => (),   
}   
```

* ржПржЗ point-ржП ржЖржорж░рж╛ ржЬрж╛ржирж┐ `event` рж╣рж▓рзЛ `KeyEvent`ред
* KeyEvent-ржПрж░ structure:

```rust
pub struct KeyEvent {
    pub code: KeyCode,
    pub modifiers: KeyModifiers,
    pub kind: KeyEventKind,
    pub state: KeyEventState,
}
```

* ржЖржорж░рж╛ ржХрзАржнрж╛ржмрзЗ character extract ржХрж░рж▓рж╛ржо?

  * ржЖржЧрзЗрж░ Error Handling ржЙржжрж╛рж╣рж░ржгрзЗ ржжрзБржЯрж┐ box ржПрж░ ржзрж╛рж░ржгрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржЫрж┐рж▓рж╛ржо (pink box = Ok, black box = Err)ред
  * ржПржЦрж╛ржирзЗ рж╕рзЗржЗ ржзрж╛рж░ржгрж╛ extend ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред

---

### ЁЯФ╣ KeyCode ржПрж░ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд

```rust
pub enum KeyCode {
    Backspace,
    Enter,
    // ржЖрж░ржУ KeyCodes
    Char(char),
    // ржЖрж░ржУ ржХрж┐ржЫрзБ KeyCodes
}
```

KeyCode represent ржХрж░рждрзЗ ржкрж╛рж░рзЗ:

* Backspace
* Enter
* ржЕржирзНржпрж╛ржирзНржп key
* ржПржХржЯрж┐ character рж░рж╛ржЦрж╛рж░ box

> ржкрзНрж░ржержо branch ржмрзЛржЭрж╛ржпрж╝: тАЬржпржжрж┐ event.code ржПржХржЯрж┐ character ржзрж╛рж░ржг ржХрж░рзЗ, рждрж╛ржХрзЗ c ржмрж▓рзБржи ржПржмржВ block execute ржХрж░рзБржитАЭ

---

### ЁЯФ╣ Match ржПрж░ ржЕрждрж┐рж░рж┐ржХрзНржд ржзрж╛рж░ржгрж╛

* Match **exhaustive рж╣рждрзЗ рж╣ржмрзЗ** тЖТ ржЕрж░рзНржерж╛рзО рж╕ржм possible case address ржХрж░рждрзЗ рж╣ржмрзЗред
* ржпржжрж┐ ржХрзЛржирзЛ character box ржирж╛ ржерж╛ржХрзЗ тЖТ `_ => ()` тЖТ ржЕрж░рзНрже: ржХрж┐ржЫрзБ ржирж╛ ржХрж░рж╛ред

> ржкрзНрж░рж╢рзНржи рж╣рждрзЗ ржкрж╛рж░рзЗ: ржпржжрж┐ match рж╕ржм case cover ржХрж░рзЗ, рждрж╛рж╣рж▓рзЗ `_` ржХрзЗржи?
>
> * ржПржЯрж┐ clippy ржмрж╛ рж▓рж┐ржирзНржЯрж╛рж░ ржжрж┐ржпрж╝рзЗ potential issue рж╣рж┐рж╕рзЗржмрзЗ рж╣рж╛ржЗрж▓рж╛ржЗржЯ ржХрж░рж╛ ржпрж╛ржпрж╝ред

---

### ЁЯФ╣ Outer Match ржЙржжрж╛рж╣рж░ржг

```rust
match read() {
    Ok(Key(event)) => {
        // ... inner match
    },
    Err(err) => println!("Error: {}", err),
    _ => ()
}
```

* ржкрзНрж░ржержо branch: **Pink box ржзрж╛рж░ржгрж╛ ржмрзНржпржмрж╣рж╛рж░**

  * `read()` returns pink box `Ok`
  * pink box-ржПрж░ ржнрж┐рждрж░рзЗ `Key` box
  * ржПрж░ржкрж░ ржЖржорж░рж╛ `event` ржмрзЗрж░ ржХрж░рж┐ ржПржмржВ proceed ржХрж░рж┐

* ржжрзНржмрж┐рждрзАржпрж╝ branch: **Error handle**

  * black box тЖТ `err` ржмрзЗрж░ ржХрж░рж┐ ржПржмржВ print ржХрж░рж┐

* рждрзГрждрзАржпрж╝ branch: **ржЕржирзНржпрж╛ржирзНржп рж╕ржм combination**

  * pink Ok boxes ржпрж╛ Key box ржзрж░рзЗ ржирж╛ тЖТ ржХрж┐ржЫрзБ ржирж╛ ржХрж░рж╛

---

тАЬржоржирзЗ рж╣ржЪрзНржЫрзЗ ржЖржкржирж┐ ржПржХржЯрж┐ ржкрзНрж░рзЛржЧрзНрж░рж╛ржо рж▓рж┐ржЦржЫрзЗржиред рж╕рж╛рж╣рж╛ржпрзНржп ржЪрж╛ржи?тАЭ
ржХрзЛржбржЯрж┐ ржХрж┐ ржПржЦржи *idiomatic* ржмрж╛ рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ ржзрж╛ржБржЪрзЗ рж▓рзЗржЦрж╛ рж╣рзЯрзЗржЫрзЗ? ржоржирзЗ рж╣рзЯ рждрж╛ржЗред
ржХрж┐ржирзНрждрзБ ржПржЯрж┐ ржХрж┐ ржЕрж╕рж╛ржзрж╛рж░ржг? ржарж┐ржХ рждрж╛ ржирзЯред
рж╕ржм *idioms* ржЬрж╛ржирж╛ ржорж╛ржирзЗржЗ ржПржХржЬржи ржХржмрж┐ рж╣ржУрзЯрж╛ ржирзЯред ржХрж┐ржЫрзБржЯрж╛ ржкрж░рзНржпржирзНржд ржПржЯрж┐ ржЧрзНрж░рж╣ржгржпрзЛржЧрзНржп, ржпрзЗржоржи ржЖржЧрзЗ ржмрж▓рж╛ рж╣рзЯрзЗржЫрж┐рж▓ред
рждржмрзЗ ржЖржорж░рж╛ ржЖржорж╛ржжрзЗрж░ ржХрзЛржбржХрзЗ ржЖрж░ржУ ржЙржирзНржиржд ржХрж░рждрзЗ рзйрзж ржмржЫрж░ ржЖржЧрзЗрж░ ржПржХ ржмрж┐рж░ржХрзНрждрж┐ржХрж░ ржкрзЗржкрж╛рж░ ржХрзНрж▓рж┐ржк (Clippy)-ржПрж░ рж╕рж╛рж╣рж╛ржпрзНржп ржирж┐рждрзЗ ржкрж╛рж░рж┐ред

---

### ЁЯзй Clippy ржХрзА?

**Clippy** ржПржХржжрж┐ржХрзЗ Microsoft Office 97-ржПрж░ ржПржХржЯрж┐ ржмрж┐рж░ржХрзНрждрж┐ржХрж░ рж╕рж╣ржХрж╛рж░рзА ржЪрж░рж┐рждрзНрж░ ржЫрж┐рж▓,
ржЕржирзНржпржжрж┐ржХрзЗ ржПржЯрж┐ Rust-ржПрж░ ржПржХржЯрж┐ *linter* тАФ ржПржХржЯрж┐ ржЯрзБрж▓ ржпрж╛ ржЖржорж╛ржжрзЗрж░ ржХрзЛржбрзЗ рж╕ржорзНржнрж╛ржмрзНржп ржЙржирзНржирждрж┐рж░ ржжрж┐ржХ ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рзЗред

ржЯрж╛рж░рзНржорж┐ржирж╛рж▓ ржерзЗржХрзЗ ржПржЯрж┐ ржЪрж╛рж▓рж╛ржирзЛ ржпрж╛рзЯ ржПржнрж╛ржмрзЗ:

```bash
cargo clippy
```

Clippy ржХрж┐ржЫрзБ ржЗржЪрзНржЫрж╛ржХрзГрждржнрж╛ржмрзЗ рж░рж╛ржЦрж╛ ржнрзБрж▓ржУ ржзрж░рждрзЗ ржкрж╛рж░рзЗред ржпрзЗржоржи ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк:

```
warning: unnecessary parentheses around `match` scrutinee expression
  --> src/editor.rs:19:27
   |
19 |                     match (event.code) {
   |                           ^          ^
   |
   = note: `#[warn(unused_parens)]` on by default
help: remove these parentheses
   |
19 -                     match (event.code) {
19 +                     match event.code {
   |
```

ржжрзЗржЦрзБржи, Clippy ржХрждржЯрж╛ ржирж┐рж░рзНржнрзБрж▓ржнрж╛ржмрзЗ рж╕ржорж╕рзНржпрж╛рж░ ржЬрж╛рзЯржЧрж╛ ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рзЗржЫрзЗ!
ржПржЯрж┐ рж╢рзБржзрзБ рж╕ржорж╕рзНржпрж╛ ржЬрж╛ржирж╛рзЯ ржирж╛, ржмрж░ржВ ржХрзАржнрж╛ржмрзЗ рждрж╛ ржарж┐ржХ ржХрж░рждрзЗ рж╣ржмрзЗ рждрж╛ржУ ржмрж▓рзЗ ржжрзЗрзЯред
ржЖржорж░рж╛ ржПржЗ рж╕ржорж╕рзНржпрж╛ ржкрж░рзЗ ржарж┐ржХ ржХрж░ржм, ржХрж┐ржирзНрждрзБ ржкрзНрж░ржержорзЗ Clippy-ржХрзЗ ржЖрж░ржУ ржЧржнрзАрж░ржнрж╛ржмрзЗ ржЪрзЗржХ ржХрж░рждрзЗ ржжрж┐ржЗред

---

### ЁЯза Clippy-ржПрж░ ржЕрждрж┐рж░рж┐ржХрзНржд ржкрж░рзАржХрзНрж╖рж╛ ржЪрж╛рж▓рж╛ржирзЛ

Clippy-ржПрж░ ржмрж┐ржнрж┐ржирзНржи рж╕рзЗржЯрж┐ржВ ржмрж╛ *flags* ржЖржЫрзЗред
ржЖржорж╛ржжрзЗрж░ ржорждрзЛ ржирждрзБржиржжрзЗрж░ ржЬржирзНржп рж╕ржмржЪрзЗрзЯрзЗ ржЙржкржпрзБржХрзНржд рж╣рж▓рзЛ **pedantic** ржорзЛржб,
ржпрж╛ рж╕ржм ржзрж░ржирзЗрж░ рж╕ржорзНржнрж╛ржмрзНржп ржЙржирзНржирждрж┐рж░ ржкрж░рж╛ржорж░рзНрж╢ ржжрзЗрзЯред

ржЪрж╛рж▓рж╛ржирзЛрж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи:

```bash
cargo clippy -- -W clippy::all -W clippy::pedantic
```

ржПржЦржи ржЖржкржирж┐ ржЕржирзЗржХржЧрзБрж▓рзЛ *warning* ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржиред

Clippy рж╢рзБржзрзБ ржжрзБрж░рзНржмрж▓рждрж╛ ржЬрж╛ржирж╛рзЯ ржирж╛, ржмрж░ржВ ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржирзЗрж░ рж▓рж┐ржВржХржУ ржжрзЗрзЯ ржпрж╛рждрзЗ ржЖржкржирж┐ ржЖрж░ржУ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржЬрж╛ржирждрзЗ ржкрж╛рж░рзЗржи тАФ ржжрж╛рж░рзБржг ржмрзНржпрж╛ржкрж╛рж░!

---

### тЪЩя╕П рж╕рзНржмрзЯржВржХрзНрж░рж┐рзЯржнрж╛ржмрзЗ рж╕ржорж╕рзНржпрж╛ ржарж┐ржХ ржХрж░рж╛

Clippy ржХрж┐ржЫрзБ рж╕ржорж╕рзНржпрж╛ ржирж┐ржЬрзЗржЗ ржарж┐ржХ ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржПрж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи:

```bash
cargo clippy --fix -- -W clippy::all -W clippy::pedantic
```

ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ Clippy-ржХрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ *flags* ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржмрж▓рждрзЗ ржкрж╛рж░рзЗржиред
ржПрж░ ржЬржирзНржп ржЖржкржирж╛рж░ `main.rs` ржлрж╛ржЗрж▓рзЗрж░ рж╢рзБрж░рзБрж░ ржжрж┐ржХрзЗ ржирж┐ржЪрзЗрж░ рж▓рж╛ржЗржиржЯрж┐ ржпрзЛржЧ ржХрж░рзБржи:

```rust
#![warn(all, clippy::pedantic)]
```

ржПржЯрж┐ ржжрзБржЗржЯрж┐ ржХрзНржпрж╛ржЯрзЗржЧрж░рж┐ рж╕ржХрзНрж░рж┐рзЯ ржХрж░ржмрзЗ тАФ **all** ржПржмржВ **pedantic**ред
ржпржжрж┐ржУ ржирж╛ржо тАЬallтАЭ, ржПржЯрж┐ ржЖрж╕рж▓рзЗ рж╕ржмржХрж┐ржЫрзБ ржЕржирзНрждрж░рзНржнрзБржХрзНржд ржХрж░рзЗ ржирж╛,
рждржмрзЗ ржПрждрзЗ **correctness**, **suspicious**, **style**, **complexity**, ржПржмржВ **perf** ржЕржирзНрждрж░рзНржнрзБржХрзНржд ржерж╛ржХрзЗред
ржЖржорж╛ржжрзЗрж░ ржкрзНрж░рзЯрзЛржЬржи ржорзВрж▓ржд **style**, рждржмрзЗ ржмрж╛ржХрж┐ржЧрзБрж▓рзЛржУ ржХрзНрж╖рждрж┐ ржХрж░ржмрзЗ ржирж╛ред

---

### тЬЕ ржкрж░рж┐ржмрж░рзНрждржиржЧрзБрж▓рзЛ ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рж╛

ржПржЦржи ржЖржорж░рж╛ Clippy-ржПрж░ рж╕рзНржмрзЯржВржХрзНрж░рж┐рзЯ ржкрж░рж┐ржмрж░рзНрждржи ржУ ржирж┐ржЬрзЗрж░ рж╣рж╛рждрзЗ ржХрж┐ржЫрзБ рж╕ржВрж╢рзЛржзржи ржХрж░рзЗ ржХрзЛржбржЯрж┐ ржХржорж┐ржЯ ржХрж░ржмред

ржПржЗ ржкрзНрж░ржХрзНрж░рж┐рзЯрж╛рж░ ржорж╛ржзрзНржпржорзЗ Clippy ржЖржорж╛ржжрзЗрж░ ржжрзБржЯрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рж╢рж┐ржХрзНрж╖рж╛ ржжрж┐рзЯрзЗржЫрзЗ:

1. ржХрзАржнрж╛ржмрзЗ **format strings** ржЕржкрзНржЯрж┐ржорж╛ржЗржЬ ржХрж░рждрзЗ рж╣рзЯ
2. ржХрзАржнрж╛ржмрзЗ **if let** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХрзЛржб ржЖрж░ржУ ржкрж░рж┐ржЪрзНржЫржирзНржиржнрж╛ржмрзЗ рж▓рзЗржЦрж╛ ржпрж╛рзЯ

Clippy ржПржЦржирзЛ ржарж┐ржХржЗ ржЬрж╛ржирж╛ржЪрзНржЫрзЗ ржпрзЗ ржЖржорж╛ржжрзЗрж░ `run()` ржлрж╛ржВрж╢ржиржЯрж┐ `Editor` ржЗржирзНрж╕ржЯрзНржпрж╛ржирзНрж╕рзЗрж░ ржУржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░ржЫрзЗ ржирж╛ред
ржЖржорж░рж╛ ржПржЯрж┐ ржЗржЪрзНржЫрж╛ржХрзГрждржнрж╛ржмрзЗ ржПржоржи рж░рзЗржЦрзЗржЫрж┐ ржпрж╛рждрзЗ ржПржХрж╕рж╛ржерзЗ ржмрж┐ржнрж┐ржирзНржи ржзрж░ржгрзЗрж░ ржлрж╛ржВрж╢ржи рж╢рзЗржЦрж╛ржирзЛ ржпрж╛рзЯред
рждржмрзЗ рж╢рж┐ржЧржЧрж┐рж░ржЗ ржЖржорж░рж╛ ржПржЯрж┐ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░ржмред

---

### ЁЯОп рж╢рзЗрж╖ рж▓ржХрзНрж╖рзНржп

ржЖржорж╛ржжрзЗрж░ рж▓ржХрзНрж╖рзНржп рж╣ржмрзЗ ржПржоржиржнрж╛ржмрзЗ ржХрзЛржб рж▓рзЗржЦрж╛ ржпрж╛рждрзЗ ржХрзЛржирзЛ **warning** ржирж╛ ржерж╛ржХрзЗред
ржПржЯрж┐ ржнржмрж┐рж╖рзНржпрждрзЗрж░ ржбрзЗржнрзЗрж▓ржкрж╛рж░ржжрзЗрж░ ржЗржЩрзНржЧрж┐ржд ржжрзЗрзЯ ржпрзЗ ржЖржорж░рж╛ ржпрждрзНржирж╕рж╣ржХрж╛рж░рзЗ
рж╕рж░рзНржмрзЛржЪрзНржЪ ржорж╛ржирзЗрж░ ржХрзЛржб рж▓рзЗржЦрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЗржЫрж┐ред

ржпржЦржиржЗ ржХрзЛржирзЛ ржЯрж┐ржЙржЯрзЛрж░рж┐рзЯрж╛рж▓рзЗ ржПржоржи ржХрж┐ржЫрзБ ржХрж░рж╛ рж╣ржмрзЗ ржпрж╛ Clippy рж╕рж╛ржзрж╛рж░ржгржд тАЬржнрж╛рж▓рзЛ ржЪрж░рзНржЪрж╛ ржирзЯтАЭ ржмрж▓рзЗ ржоржирзЗ ржХрж░рзЗ,
рждржЦржи ржЖржорж┐ ржЯрзЗржХрзНрж╕ржЯрзЗ рждрж╛ рж╕рзНржкрж╖рзНржЯ ржХрж░рзЗ ржЙрж▓рзНрж▓рзЗржЦ ржХрж░ржмред

---

### ЁЯзй Paranoid Clippy (ржЕрждрзНржпржирзНржд рж╕рждрж░рзНржХ Clippy)

ржЖржорж░рж╛ ржЪрж╛ржЗрж▓рзЗ **Clippy**-ржХрзЗ ржЖрж░ржУ ржмрзЗрж╢рж┐ тАЬрж╕рждрж░рзНржХтАЭ ржХрж░рждрзЗ ржкрж╛рж░рж┐ тАФ ржпрзЗржи рж╕рзЗ ржПржХржЯрзБржУ ржЫрж╛рзЬ ржирж╛ ржжрзЗрзЯ!
ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржирзЗ ржПржоржи ржЕржирзЗржХ **ржЕрждрж┐рж░рж┐ржХрзНржд flags** ржжрзЗржУрзЯрж╛ ржЖржЫрзЗ ржпрж╛ рж╕ржХрзНрж░рж┐рзЯ ржХрж░рж▓рзЗ Clippy ржЖрж░ржУ ржЧржнрзАрж░ржнрж╛ржмрзЗ ржХрзЛржб ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзЗред
ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржбржЯрж┐ рж╕рзЗржЗрж╕ржм ржмрж┐ржХрж▓рзНржкрзЗрж░ рж╕ржоржирзНржмрзЯ, ржпрж╛ **hecto** ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ ржЬржирзНржп рж╕ржмржЪрзЗрзЯрзЗ ржЙржкржХрж╛рж░рзА ржмрж▓рзЗ ржоржирзЗ рж╣рзЯ:

```bash
cargo clippy -- -W clippy::all -W clippy::pedantic -W clippy::nursery -W clippy::cargo -W clippy::restriction
```

---

### тЪая╕П рждржмрзЗ рж╕рждрж░рзНржХ ржерж╛ржХрзБржи!

ржПржЗ ржкржжрзНржзрждрж┐ **ржЦрзБржмржЗ ржХржарзЛрж░**, ржХрж┐ржирзНрждрзБ ржПрж░ ржХрж┐ржЫрзБ ржЦрж░ржЪржУ ржЖржЫрзЗред
Clippy ржпржд ржмрзЗрж╢рж┐ тАЬparanoidтАЭ ржмрж╛ ржЕрждрж┐рж╕рждрж░рзНржХ рж╣рзЯ, рждрждржЗ рж╕рзЗ ржПржоржи ржХрж┐ржЫрзБ ржХрзЛржбржХрзЗ ржнрзБрж▓ рж╣рж┐рж╕рзЗржмрзЗ ржжрзЗржЦрж╛рждрзЗ ржкрж╛рж░рзЗ
ржпрж╛ ржЖрж╕рж▓рзЗ **ржкрж░рж┐рж╕рзНржерж┐рждрж┐ ржЕржирзБржпрж╛рзЯрзА ржарж┐ржХржЗ ржЖржЫрзЗ**ред

рждрж╛рж░ржУ ржЪрзЗрзЯрзЗ ржЦрж╛рж░рж╛ржк, ржХрж┐ржЫрзБ *rules* ржПржХрзЗ ржЕржкрж░рзЗрж░ **ржмрж┐рж░рзЛржзрзА ржкрж░рж╛ржорж░рзНрж╢** ржжрж┐рждрзЗ ржкрж╛рж░рзЗ тАФ
ржПржХржЯрж┐ ржмрж▓ржмрзЗ тАЬржПржнрж╛ржмрзЗ ржХрж░рзЛтАЭ, ржЕржирзНржпржЯрж┐ ржмрж▓ржмрзЗ тАЬржПржнрж╛ржмрзЗ ржХрж░рзЛ ржирж╛тАЭред

---

### ЁЯОУ ржЖржорж╛ржжрзЗрж░ ржЕржнрж┐ржЬрзНржЮрждрж╛рж░ рж╕рзНрждрж░ ржЕржирзБржпрж╛рзЯрзА

ржЖржорж╛ржжрзЗрж░ ржорждрзЛ Rust-ржП ржирждрзБржиржжрзЗрж░ ржЬржирзНржп ржПрж╕ржм рж╕рзВржХрзНрж╖рзНржо ржмрж┐рж╖рзЯ ржкрзБрж░рзЛржкрзБрж░рж┐ ржмрзЛржЭрж╛ ржХржарж┐ржи рж╣рждрзЗ ржкрж╛рж░рзЗред
ржПрждрзЗ ржнрзБрж▓ ржкржерзЗ рж╕ржорзЯ ржирж╖рзНржЯ рж╣ржУрзЯрж╛рж░ ржЭрзБржБржХрж┐ржУ ржерж╛ржХрзЗред

рждрж╛ржЗ ржЖржорж╛ржжрзЗрж░ ржмрж░рзНрждржорж╛ржи рж╕рзНрждрж░рзЗ **pedantic** рж╕рзЗржЯрж┐ржВ-ржЯрж╛ржЗ ржпржерзЗрж╖рзНржЯ ржЙржЪрзНржЪржорж╛ржирзЗрж░ ржПржмржВ рж╢рзЗржЦрж╛рж░ ржЬржирзНржп ржЙржкржпрзБржХрзНрждред

ЁЯСЙ рж╕рзБрждрж░рж╛ржВ, ржЖржкрж╛рждржд ржПржЦрж╛ржирзЗржЗ ржерж╛ржорж┐ тАФ **Paranoid Clippy** ржорзЛржбрзЗ ржирж╛ ржЧрж┐рзЯрзЗ,
**Pedantic Clippy** ржжрж┐рзЯрзЗржЗ ржЖржорж░рж╛ ржнрж╛рж▓рзЛ ржХрзЛржбрзЗрж░ ржкржерзЗ ржПржЧрзЛрждрзЗ ржерж╛ржХржмред

### тЪЩя╕П ржЙржирзНржиржд рждрзНрж░рзБржЯрж┐ (Error) рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ

ржПржЦржи ржЖржорж░рж╛ **idiomatic code** ржирж┐рзЯрзЗ ржЖрж▓рзЛржЪржирж╛рж░ рж╢рзЗрж╖ ржЕржВрж╢рзЗ ржкрзМржБржЫрзЗржЫрж┐ тАФ
ржПржмрж╛рж░ ржХржерж╛ ржмрж▓рж┐ **error handling** ржирж┐рзЯрзЗ, ржпрзЗржоржиржЯрж╛ ржЖржорж░рж╛ ржЖржЧрзЗржЗ ржкрзНрж░рждрж┐рж╢рзНрж░рзБрждрж┐ ржжрж┐рзЯрзЗржЫрж┐рж▓рж╛ржоред

ржЖржорж╛ржжрзЗрж░ ржорзВрж▓ рж▓ржХрзНрж╖рзНржп рж╣рж▓рзЛ ржирж┐ржЪрзЗрж░ рждрж┐ржиржЯрж┐ ржзрж╛ржк ржорзЗржирзЗ рждрзНрж░рзБржЯрж┐ржЧрзБрж▓рзЛ ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рж╛ ЁЯСЗ

---

### ЁЯзй рзз. рж╕рзНржерж╛ржирзАрзЯржнрж╛ржмрзЗ рж╕ржорж╛ржзрж╛ржи (Handle locally)

ржпржжрж┐ ржХрзЛржирзЛ рждрзНрж░рзБржЯрж┐ ржПржоржи рж╣рзЯ ржпрж╛ **рж╕рзЗржЗ ржЬрж╛рзЯржЧрж╛рждрзЗржЗ рж╕ржорж╛ржзрж╛ржи ржХрж░рж╛ ржпрж╛рзЯ**,
рждрж╛рж╣рж▓рзЗ ржЖржорж░рж╛ **ржУржЦрж╛ржирзЗржЗ** рж╕рзЗржЯрж┐ ржарж┐ржХ ржХрж░ржмред

---

### ЁЯкЬ рзи. ржЙржкрж░рзЗрж░ рж╕рзНрждрж░рзЗ ржкрж╛ржарж╛ржирзЛ (Pass upwards)

ржпржжрж┐ ржХрзЛржирзЛ рждрзНрж░рзБржЯрж┐ **рждрж╛рзОржХрзНрж╖ржгрж┐ржХржнрж╛ржмрзЗ ржарж┐ржХ ржХрж░рж╛ ржирж╛ ржпрж╛рзЯ**,
рждрж╛рж╣рж▓рзЗ рж╕рзЗржЯрж┐ржХрзЗ **ржЙржкрж░рзЗ ржкрж╛ржарж┐рзЯрзЗ ржжрзЗржУрзЯрж╛ рж╣ржмрзЗ** тАФ
ржпрзЗржЦрж╛ржирзЗ ржЙржЪрзНржЪ рж╕рзНрждрж░рзЗрж░ ржХрзЛржб рж╕рзЗржЯрж┐ ржЖрж░ржУ ржнрж╛рж▓рзЛржнрж╛ржмрзЗ рж╣рзНржпрж╛ржирзНржбрж▓ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗред

---

### ЁЯПБ рзй. рж╕рж░рзНржмрзЛржЪрзНржЪ рж╕рзНрждрж░рзЗ рж╕рзБржирзНржжрж░ржнрж╛ржмрзЗ ржорзЛржХрж╛ржмрж┐рж▓рж╛ (Top-level handling)

ржпржжрж┐ ржХрзЛржирзЛ рждрзНрж░рзБржЯрж┐ **рж╕ржм ржзрж╛ржк ржкрзЗрж░рж┐рзЯрзЗ** ржПржХрзЗржмрж╛рж░рзЗ ржЙржкрж░рзЗрж░ рж╕рзНрждрж░рзЗ ржЪрж▓рзЗ ржЖрж╕рзЗ,
рждрж╛рж╣рж▓рзЗ ржЖржорж░рж╛ рж╕рзЗржЯрж┐ржХрзЗ ржпрждржЯрж╛ рж╕ржорзНржнржм **рж╢рж╛ржирзНрждрж┐ржкрзВрж░рзНржг ржУ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА-ржмрж╛ржирзНржзржмржнрж╛ржмрзЗ** ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░ржмред

---

ржПрж░ ржкрж╛рж╢рж╛ржкрж╛рж╢рж┐, ржЖржорж░рж╛ **ржорзВрж▓ рж▓рзБржк (main loop)** ржерзЗржХрзЗ рждрзНрж░рзБржЯрж┐ рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ рж▓ржЬрж┐ржХржХрзЗ **ржЖрж▓рж╛ржжрж╛ ржХрж░ржм**
ржПржмржВ ржкрзНрж░рзЛржЧрзНрж░рж╛ржо рж╢рзЗрж╖ рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ ржПржХржЯрж┐ **рж╕рж╣ржЬ тАЬGoodbyeтАЭ ржмрж╛рж░рзНрждрж╛** ржжрзЗржЦрж╛ржмред ЁЯСЛ

---

ЁЯза **рж╕ржВржХрзНрж╖рзЗржкрзЗ:**

> ржЫрзЛржЯржЦрж╛ржЯрзЛ ржнрзБрж▓ржЧрзБрж▓рзЛ ржирж┐ржЪрзЗ рж╕рж╛ржорж▓рж╛ржирзЛ рж╣ржмрзЗ,
> ржмрзЬ ржнрзБрж▓ржЧрзБрж▓рзЛ ржЙржкрж░рзЗ ржкрж╛ржарж╛ржирзЛ рж╣ржмрзЗ,
> ржЖрж░ ржПржХрзЗржмрж╛рж░рзЗ ржмрзЬ ржХрзЛржирзЛ рж╕ржорж╕рзНржпрж╛ рж╣рж▓рзЗ, рж╕рзЗржЯрж┐ рж╕рзБржирзНржжрж░ржнрж╛ржмрзЗ ржжрзЗржЦрж╛ржирзЛ рж╣ржмрзЗред

---

ЁЯФЧ ржмрж┐рж╕рзНрждрж╛рж░рж┐рждржнрж╛ржмрзЗ ржХрзАржнрж╛ржмрзЗ ржПржЯрж┐ ржХрж╛ржЬ ржХрж░рзЗ рждрж╛ ржжрзЗржЦрждрзЗ ржЪрж╛ржЗрж▓рзЗ,
рждрзБржорж┐ ржХрзЛржбржЯрж┐ ржПржЦрж╛ржирзЗ ржжрзЗржЦрждрзЗ ржкрж╛рж░ржмрзЗ (ржЯрж┐ржЙржЯрзЛрж░рж┐рзЯрж╛рж▓рзЗ ржпрзЗржЦрж╛ржирзЗ тАЬcheck out the code hereтАЭ ржмрж▓рж╛ рж╣рзЯрзЗржЫрзЗ)ред

--- 

### ЁЯз░ **Ctrl-Q ржЪрж╛ржкрж▓рзЗ ржмрзЗрж░ рж╣ржУрзЯрж╛ (Quit on Ctrl-Q)**

ржПржЦржи ржкрж░рзНржпржирзНржд ржЖржорж╛ржжрзЗрж░ **Text Editor** ржП ржХрзЗржЙ рж╢рзБржзрзБ `q` ржЯрж╛ржЗржк ржХрж░рж▓рзЗржЗ ржкрзНрж░рзЛржЧрзНрж░рж╛ржо ржмржирзНржз рж╣рзЯрзЗ ржпрж╛рзЯ тАФ
ржпрж╛ ржЖрж╕рж▓рзЗ ржЦрзБржм ржПржХржЯрж╛ ржнрж╛рж▓рзЛ ржкржжрзНржзрждрж┐ ржирзЯред ЁЯШЕ
ржПржЦржи ржЖржорж░рж╛ ржПржЯрж╛ ржПржХржЯрзБ ржЙржирзНржиржд ржХрж░ржм тАФ ржпрзЗржи ржкрзНрж░рзЛржЧрзНрж░рж╛ржо **рж╢рзБржзрзБржорж╛рждрзНрж░ `Ctrl + Q` ржЪрж╛ржкрж▓рзЗ** ржмржирзНржз рж╣рзЯред

---

### ЁЯОп **ржХрзЗржи ржПржЗ ржкрж░рж┐ржмрж░рзНрждржи ржжрж░ржХрж╛рж░?**

ржпржЦржи ржХрзЛржб ржмрзЬ рж╣рждрзЗ ржерж╛ржХрзЗ ржПржмржВ ржлрж╛ржВрж╢ржиржЧрзБрж▓рзЛ ржЖрж░ржУ ржЬржЯрж┐рж▓ рж╣рзЯ,
рждржЦржи ржкрзНрж░рждрж┐ржмрж╛рж░ рж▓рзБржкрзЗрж░ ржоржзрзНржпрзЗ ржЧрж┐рзЯрзЗ ржкрзНрж░рзЛржЧрзНрж░рж╛ржо ржерж╛ржорж╛ржирзЛ ржЭрж╛ржорзЗрж▓рж╛рж░ рж╣рзЯрзЗ ржжрж╛ржБрзЬрж╛рзЯред
рждрж╛ржЗ ржЖржорж╛ржжрзЗрж░ ржжрж░ржХрж╛рж░ ржПржоржи ржПржХржЯрж┐ ржмрзНржпржмрж╕рзНржерж╛,
ржпрзЗржЦрж╛ржирзЗ ржкрзНрж░рзЛржЧрзНрж░рж╛ржоржХрзЗ рж╕рж╣ржЬржнрж╛ржмрзЗ ржмрж▓рж╛ ржпрж╛рзЯ тАФ тАЬржПржЦржи ржмрзЗрж░ рж╣рзЯрзЗ ржпрж╛ржУредтАЭ

---

### ЁЯзй **рж╕ржорж╛ржзрж╛ржи: `should_quit` ржирж╛ржорзЗрж░ ржПржХржЯрж┐ boolean**

ржЖржорж░рж╛ ржЖржорж╛ржжрзЗрж░ `Editor` struct-ржП ржПржХржЯрж┐ ржирждрзБржи boolean ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ ржпрзЛржЧ ржХрж░ржм:

```rust
should_quit: bool
```

ржПрж░ ржХрж╛ржЬ рж╣ржмрзЗ тАФ ржкрзНрж░рзЛржЧрзНрж░рж╛ржо ржХржЦржи ржмржирзНржз рж╣ржмрзЗ рждрж╛ **ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рж╛**ред
ржпржЦржи `Ctrl + Q` ржЪрж╛ржкрж╛ рж╣ржмрзЗ, рждржЦржи `should_quit = true` рж╕рзЗржЯ ржХрж░рж╛ рж╣ржмрзЗ,
ржПржмржВ рж▓рзБржкржЯрж┐ рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХржнрж╛ржмрзЗ рж╢рзЗрж╖ рж╣ржмрзЗред

ржПржЗ ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ ржлрж▓рзЗ Clippy ржерзЗржХрзЗ ржкрж╛ржУрзЯрж╛ рж╢рзЗрж╖ warning-ржЯрж┐ржУ ржжрзВрж░ рж╣ржмрзЗ тЬЕ

---

### ЁЯТб **Rust-ржПрж░ Ownership-ржПрж░ ржкрзНрж░ржержо ржзрж╛рж░ржгрж╛**

ржПржЗ ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ рж╕ржЩрзНржЧрзЗ рж╕ржЩрзНржЧрзЗ ржЖржорж░рж╛ ржПржХржЯрзБ **Ownership** ржзрж╛рж░ржгрж╛рж░ рж╕рзНржмрж╛ржжржУ ржкрж╛ржмрзЛред
Rust ржЦрзБржм ржХрзЬрж╛ тАФ ржХрзЗ ржХрзЛржи ржбрзЗржЯрж╛ **read** ржмрж╛ **write** ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ,
рждрж╛ ржПржХржжржо рж╕рзНржкрж╖рзНржЯржнрж╛ржмрзЗ ржЬрж╛ржирждрзЗ ржЪрж╛рзЯред

ржпржЦржиржЗ ржХрзЛржирзЛ ржбрзЗржЯрж╛ ржкрж░рж┐ржмрж░рзНрждржиржпрзЛржЧрзНржп (mutable) рж╣рждрзЗ рж╣ржмрзЗ,
ржЖржорж╛ржжрзЗрж░ `mut` ржХрзАржУрзЯрж╛рж░рзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣ржмрзЗ тАФ
ржпрзЗржоржи:

```rust
let mut editor = Editor::new();
```

ржПржнрж╛ржмрзЗ Rust ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпрзЗ **ржорзЗржорж░рж┐ рж╕рзЗржлржЯрж┐ (Memory Safety)** ржмржЬрж╛рзЯ ржерж╛ржХрзЗ
ржПржмржВ ржХрзЛржирзЛ ржнрзБрж▓ржмрж╢ржд ржбрзЗржЯрж╛ ржУржнрж╛рж░рж░рж╛ржЗржЯ ржмрж╛ ржЕржкржмрзНржпржмрж╣рж╛рж░ ржирж╛ рж╣рзЯред

---

ЁЯФЧ ржПржЗ ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ рж╕ржорзНржкрзВрж░рзНржг ржХрзЛржб рждрзБржорж┐ ржЯрж┐ржЙржЯрзЛрж░рж┐рзЯрж╛рж▓рзЗрж░ тАЬcheck out how we made these changes hereтАЭ ржЕржВрж╢рзЗ ржжрзЗржЦрждрзЗ ржкрж╛рж░ржмрзЗред

---

### ЁЯз╣ **рж╕рзНржХрзНрж░рж┐ржи ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рж╛ (Clear the Screen)**

ржПржЦржи ржЖржорж░рж╛ рж╢рж┐ржЦржм ржХрзАржнрж╛ржмрзЗ ржЖржорж╛ржжрзЗрж░ **Text Editor-ржПрж░ UI (User Interface)**
ржкрзНрж░рждрж┐ржмрж╛рж░ ржХрзЛржирзЛ ржХрзА ржЪрж╛ржкрж▓рзЗ рж╕ржарж┐ржХржнрж╛ржмрзЗ рж░рзЗржирзНржбрж╛рж░ ржХрж░рж╛ рж╣рзЯред
ржПржЯрж╛ рждрж┐ржиржЯрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рж╕ржорзЯ ржШржЯрзЗ ЁЯСЗ

1. **рж╢рзБрж░рзБрждрзЗржЗ (Startup)** тЖТ ржпржЦржи ржЖржорж░рж╛ ржЗржЙржЬрж╛рж░рзЗрж░ ржЬржирзНржп ржкрж░рж┐ржмрзЗрж╢ рждрзИрж░рж┐ ржХрж░ржЫрж┐ред
2. **ржкрзНрж░рждрж┐ржЯрж┐ ржХрзА ржЪрж╛ржкрж╛рж░ ржкрж░** тЖТ ржЗржЙржЬрж╛рж░рзЗрж░ ржЕрзНржпрж╛ржХрж╢ржи ржЕржирзБржпрж╛рзЯрзА ржЖржкржбрзЗржЯ ржжрзЗржЦрж╛ржирзЛрж░ ржЬржирзНржпред
3. **ржкрзНрж░рж╕рзНржерж╛ржи ржХрж░рж╛рж░ ржЖржЧрзЗ (Before exit)** тЖТ рж╕рзНржХрзНрж░рж┐ржи ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рзЗ рж╕рзБржирзНржжрж░ржнрж╛ржмрзЗ ржкрзНрж░рзЛржЧрзНрж░рж╛ржо рж╢рзЗрж╖ ржХрж░рж╛рж░ ржЬржирзНржпред

---

### ЁЯз╛ **ржкрзНрж░ржержо ржзрж╛ржк тАФ рж╕рзНржХрзНрж░рж┐ржи ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рж╛**

Rust ржерзЗржХрзЗ ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ ржХржорж╛ржирзНржб ржкрж╛ржарж┐рзЯрзЗ рж╕рзНржХрзНрж░рж┐ржи ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ ржЦрзБржм рж╕рж╣ржЬрзЗржЗред
ржПржЗ рж▓рж╛ржЗржиржЯрж┐ рж▓рж┐ржЦрзЗ ржлрзЗрж▓рзЛ ржпрзЗржЦрж╛ржирзЗ рждрзБржорж┐ рж╕рзНржХрзНрж░рж┐ржи рж░рж┐ржлрзНрж░рзЗрж╢ ржХрж░рждрзЗ ржЪрж╛ржУ ЁЯСЗ

```rust
print!("\x1b[2J");
```

---

### ЁЯза **ржПржЯрж╛ ржХрзА ржХрж░ржЫрзЗ?**

* `print!` ржорзНржпрж╛ржХрзНрж░рзЛ Rust-ржП рж╕рж░рж╛рж╕рж░рж┐ ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ ржЖржЙржЯржкрзБржЯ ржкрж╛ржарж╛рзЯред
  `println!` ржПрж░ ржорждрзЛ ржирзЯ тАФ ржПржЯрж┐ рж╢рзЗрж╖рзЗ ржХрзЛржирзЛ **newline** ржпрзЛржЧ ржХрж░рзЗ ржирж╛ред
* `\x1b` рж╣рж▓рзЛ **escape character** (ASCII ржорж╛ржи 27)ред
* `1b` рж╣рж▓рзЛ 27 ржПрж░ **hexadecimal** рж░рзВржкред
* `[2J` рж╣рж▓рзЛ **escape sequence** тАФ ржпрж╛ ржЯрж╛рж░рзНржорж┐ржирж╛рж▓ржХрзЗ ржирж┐рж░рзНржжрзЗрж╢ ржжрзЗрзЯ рж╕рзНржХрзНрж░рж┐ржи ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рждрзЗред

---

### ЁЯТб **Escape sequence ржмрзЛржЭрж╛**

ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗрж░ ржЬржирзНржп ржПржЗ ржзрж░ржирзЗрж░ рж╕рж┐ржХрзЛрзЯрзЗржирзНрж╕ржЧрзБрж▓рзЛ **VT100 standard** ржерзЗржХрзЗ ржПрж╕рзЗржЫрзЗред
ржПрж░ ржорж╛ржзрзНржпржорзЗ рж╕рзНржХрзНрж░рж┐ржи, ржХрж╛рж░рзНрж╕рж░, рж░ржЩрж╕рж╣ ржЕржирзЗржХ ржХрж┐ржЫрзБ ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░рж╛ ржпрж╛рзЯред

ржПржЦрж╛ржирзЗ `J` ржХржорж╛ржирзНржб ржорж╛ржирзЗ рж╣рж▓рзЛ **Erase in Display (рж╕рзНржХрзНрж░рж┐ржи ржорзБржЫрзЗ ржлрзЗрж▓рж╛)**
ржПрж░ ржмрж┐ржнрж┐ржирзНржи ржнрзНржпрж╛рж░рж┐рзЯрзЗржирзНржЯ ЁЯСЗ

| Escape Code           | ржХрж╛ржЬ                                  |
| --------------------- | ------------------------------------ |
| `\x1b[2J`             | ржкрзБрж░рзЛ рж╕рзНржХрзНрж░рж┐ржи ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рзЗ тЬЕ          |
| `\x1b[1J`             | ржХрж╛рж░рзНрж╕рж░ ржкрж░рзНржпржирзНржд ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рзЗ          |
| `\x1b[0J` ржмрж╛ `\x1b[J` | ржХрж╛рж░рзНрж╕рж░ ржерзЗржХрзЗ ржирж┐ржЪ ржкрж░рзНржпржирзНржд ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рзЗ |

ЁЯФН ржЪрж╛ржЗрж▓рзЗ рждрзБржорж┐ ржирж┐ржЬрзЗржУ VT100 User Guide ржжрзЗржЦрзЗ ржЖрж░ржУ escape sequence ржирж┐рзЯрзЗ ржПржХрзНрж╕ржкрзЗрж░рж┐ржорзЗржирзНржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЛред

---

### тЪЩя╕П **ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрзЛржб ржХрж╛ржарж╛ржорзЛ**

ржПржЦржи ржЖржорж░рж╛ ржЖржорж╛ржжрзЗрж░ ржкрзНрж░рзЛржЧрзНрж░рж╛ржоржЯрж╛ржХрзЗ ржПржХржЯрзБ ржЧрзЛржЫрж╛ржирзЛржнрж╛ржмрзЗ рж╕рж╛ржЬрж╛ржмрзЛ:

1. **рж╢рзБрж░рзБрждрзЗ:**

   * Raw Mode ржЪрж╛рж▓рзБ ржХрж░рж╛
   * рж╕рзНржХрзНрж░рж┐ржи ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рж╛
   * ржПржбрж┐ржЯрж░ рж╕рзЗржЯржЖржк ржХрж░рж╛

2. **рж╢рзЗрж╖рзЗ:**

   * Raw Mode ржмржирзНржз ржХрж░рж╛
   * ржЖржмрж╛рж░ рж╕рзНржХрзНрж░рж┐ржи ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рж╛
   * тАЬGoodbyeтАЭ ржмрж╛рж░рзНрждрж╛ ржжрзЗржЦрж╛ржирзЛ

3. **ржорж╛ржЭржЦрж╛ржирзЗ рж▓рзБржк:**

   * ржЗржиржкрзБржЯ ржирзЗржУрзЯрж╛
   * ржЗржнрзНржпрж╛рж▓рзБрзЯрзЗржЯ ржХрж░рж╛
   * рж╕рзНржХрзНрж░рж┐ржи ржЖржкржбрзЗржЯ ржХрж░рж╛

---

### ЁЯз╝ **ржлрж▓рж╛ржлрж▓**

ржПржЦржи ржкрзНрж░рзЛржЧрзНрж░рж╛ржо ржЪрж╛рж▓рж╛рж▓рзЗ рждрзБржорж┐ ржжрзЗржЦржмрзЗ ЁЯСЗ
тЬЕ рж╕рзНржХрзНрж░рж┐ржи ржкрж░рж┐рж╖рзНржХрж╛рж░ рж╣ржЪрзНржЫрзЗ
тЬЕ ржкрзНрж░рждрж┐ржЯрж┐ ржХрзА ржкрзНрж░рзЗрж╕рзЗ ржХрзЛржирзЛ ржЗржХрзЛ рж╣ржЪрзНржЫрзЗ ржирж╛
тЬЕ ржкрзНрж░рж╕рзНржерж╛ржи (Ctrl+Q) рж╕рзБржирзНржжрж░ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗ

ржЖржорж░рж╛ ржПржЦржи ржПржХ ржзрж╛ржк ржПржЧрж┐рзЯрзЗ ржЧрзЗржЫрж┐ ржЖржорж╛ржжрзЗрж░ **hecto text editor**-ржХрзЗ ржмрж╛рж╕рзНрждржм ржЯрзЗржХрзНрж╕ржЯ ржПржбрж┐ржЯрж░рзЗрж░ ржХрж╛ржЫрж╛ржХрж╛ржЫрж┐ ржирж┐рзЯрзЗ ржпрзЗрждрзЗред ЁЯЪА

---

### тЪая╕П **ржПржХржЯрж┐ ржЯрж┐ржкрж╕**

ржпрзЗрж╣рзЗрждрзБ ржЖржорж░рж╛ ржПржЦржи рж╕рзНржХрзНрж░рж┐ржи ржмрж╛рж░ржмрж╛рж░ ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░ржЫрж┐,
рждрж╛ржЗ **compiler warning** ржмрж╛ **error** ржорзЗрж╕рзЗржЬ ржЪрзЛржЦрзЗ ржкрзЬржмрзЗ ржирж╛ред
рж╕рзЗржЧрзБрж▓рзЛ ржжрзЗржЦрждрзЗ ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗ ржЪрж╛рж▓рж╛ржУ ЁЯСЗ

```bash
cargo build
```

ржЖрж░ ржпржжрж┐ ржирждрзБржи ржХрж░рзЗ рж╕ржм ржЪрзЗржХ ржХрж░рждрзЗ ржЪрж╛ржУ ЁЯСЗ

```bash
cargo clean
cargo build
```

ржПржнрж╛ржмрзЗ рждрзБржорж┐ рж╕ржм рж╕рждрж░рзНржХрждрж╛ (warnings) ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗ ржПржмржВ ржХрзЛржбржХрзЗ ржЖрж░ржУ ржЙржирзНржиржд ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗред

---
